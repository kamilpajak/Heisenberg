{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"Heisenberg","text":"<p>AI-powered root cause analysis for flaky tests.</p>"},{"location":"#overview","title":"Overview","text":"<p>Heisenberg analyzes test failures from CI/CD pipelines and uses AI to identify the root cause, helping developers fix flaky tests faster.</p>"},{"location":"#features","title":"Features","text":"<ul> <li>Playwright Integration: Native support for Playwright test reports</li> <li>JUnit Support: Parse JUnit XML reports from any test framework</li> <li>AI Analysis: Leverage LLMs to analyze failures and suggest fixes</li> <li>GitHub Actions: Seamless integration with GitHub workflows</li> <li>Docker Logs: Correlate test failures with container logs</li> </ul>"},{"location":"#quick-links","title":"Quick Links","text":"<ul> <li>Installation</li> <li>Quick Start</li> <li>CLI Reference</li> </ul>"},{"location":"API/","title":"Heisenberg API Documentation","text":"<p>REST API for the Heisenberg backend service.</p>"},{"location":"API/#base-url","title":"Base URL","text":"<pre><code>http://localhost:8000\n</code></pre> <p>For production deployments, replace with your server URL.</p>"},{"location":"API/#authentication","title":"Authentication","text":"<p>The <code>/api/v1/analyze</code> endpoint requires an API key in the <code>X-API-Key</code> header:</p> <pre><code>X-API-Key: YOUR_API_KEY\n</code></pre> <p>Requests without a valid API key receive <code>401 Unauthorized</code>.</p> <p>Note: Other endpoints (<code>/feedback</code>, <code>/tasks</code>, <code>/usage</code>) are currently unauthenticated. This may change in future versions.</p>"},{"location":"API/#health-endpoints","title":"Health Endpoints","text":""},{"location":"API/#get-health","title":"<code>GET /health</code>","text":"<p>Simple health check.</p> <p>Response (200 OK) <pre><code>{\n  \"status\": \"healthy\",\n  \"version\": \"0.2.0\"\n}\n</code></pre></p>"},{"location":"API/#get-healthdetailed","title":"<code>GET /health/detailed</code>","text":"<p>Detailed health check with dependency status.</p> <p>Response (200 OK) <pre><code>{\n  \"status\": \"healthy\",\n  \"version\": \"0.2.0\",\n  \"database\": {\n    \"connected\": true,\n    \"latency_ms\": 15.5\n  },\n  \"timestamp\": \"2024-01-15T10:30:00Z\"\n}\n</code></pre></p> Status Description <code>healthy</code> All systems operational <code>degraded</code> Database latency &gt; 1000ms <code>unhealthy</code> Database unreachable"},{"location":"API/#analysis","title":"Analysis","text":""},{"location":"API/#post-apiv1analyze","title":"<code>POST /api/v1/analyze</code>","text":"<p>Submit test failure data for AI-powered root cause analysis.</p> <p>Request Body <pre><code>{\n  \"failed_tests\": [\n    {\n      \"test_name\": \"Login flow should redirect to dashboard\",\n      \"error_message\": \"TimeoutError: locator.click: Timeout 30000ms exceeded\",\n      \"stack_trace\": \"...\",\n      \"started_at\": \"2024-01-15T10:23:17Z\"\n    }\n  ],\n  \"logs\": {\n    \"api\": \"2024-01-15T10:23:45 ERROR: connection pool exhausted\",\n    \"database\": \"...\"\n  },\n  \"metadata\": {\n    \"repository\": \"org/repo\",\n    \"run_id\": \"123456789\"\n  }\n}\n</code></pre></p> <p>Response (200 OK) <pre><code>{\n  \"analysis_id\": \"a1b2c3d4-e5f6-7890-1234-567890abcdef\",\n  \"diagnoses\": [\n    {\n      \"test_name\": \"Login flow should redirect to dashboard\",\n      \"root_cause\": \"Database connection timeout in authentication service...\",\n      \"evidence\": [\"Backend log: 'ERROR: connection pool exhausted'\"],\n      \"suggested_fix\": \"Increase PostgreSQL connection pool size...\",\n      \"confidence_score\": 0.85\n    }\n  ]\n}\n</code></pre></p> <p>Note: This endpoint returns <code>501 Not Implemented</code> in the open-source version. Use the CLI or GitHub Action for analysis.</p>"},{"location":"API/#feedback","title":"Feedback","text":""},{"location":"API/#post-apiv1analysesanalysis_idfeedback","title":"<code>POST /api/v1/analyses/{analysis_id}/feedback</code>","text":"<p>Submit feedback on an analysis.</p> Parameter Type Description <code>analysis_id</code> UUID Analysis ID (path) <p>Request Body <pre><code>{\n  \"is_helpful\": true,\n  \"comment\": \"Spot on diagnosis!\"\n}\n</code></pre></p> <p>Response (201 Created) <pre><code>{\n  \"id\": \"f1e2d3c4-b5a6-7890-1234-567890abcdef\",\n  \"analysis_id\": \"a1b2c3d4-e5f6-7890-1234-567890abcdef\",\n  \"is_helpful\": true,\n  \"comment\": \"Spot on diagnosis!\",\n  \"created_at\": \"2024-01-15T11:00:00Z\"\n}\n</code></pre></p>"},{"location":"API/#get-apiv1feedbackstats","title":"<code>GET /api/v1/feedback/stats</code>","text":"<p>Get aggregated feedback statistics.</p> <p>Response (200 OK) <pre><code>{\n  \"total_feedback\": 150,\n  \"helpful_count\": 120,\n  \"not_helpful_count\": 30,\n  \"helpful_percentage\": 80.0\n}\n</code></pre></p>"},{"location":"API/#tasks","title":"Tasks","text":""},{"location":"API/#post-apiv1tasks","title":"<code>POST /api/v1/tasks</code>","text":"<p>Create an async background task.</p> <p>Request Body <pre><code>{\n  \"organization_id\": \"org-uuid\",\n  \"task_type\": \"historical_analysis\",\n  \"payload\": {\n    \"repository\": \"org/repo\",\n    \"time_range_days\": 90\n  }\n}\n</code></pre></p> <p>Response (201 Created) <pre><code>{\n  \"id\": \"t1a2s3k4-e5f6-7890-1234-567890abcdef\",\n  \"task_type\": \"historical_analysis\",\n  \"status\": \"pending\",\n  \"payload\": {...},\n  \"result\": null,\n  \"error_message\": null,\n  \"created_at\": \"2024-01-15T12:00:00Z\",\n  \"started_at\": null,\n  \"completed_at\": null\n}\n</code></pre></p>"},{"location":"API/#get-apiv1taskstask_id","title":"<code>GET /api/v1/tasks/{task_id}</code>","text":"<p>Get task status and result.</p> Parameter Type Description <code>task_id</code> UUID Task ID (path) <p>Response (200 OK) <pre><code>{\n  \"id\": \"t1a2s3k4-e5f6-7890-1234-567890abcdef\",\n  \"task_type\": \"historical_analysis\",\n  \"status\": \"completed\",\n  \"payload\": {...},\n  \"result\": {\"common_failure_pattern\": \"database_deadlock\"},\n  \"error_message\": null,\n  \"created_at\": \"2024-01-15T12:00:00Z\",\n  \"started_at\": \"2024-01-15T12:00:05Z\",\n  \"completed_at\": \"2024-01-15T12:05:00Z\"\n}\n</code></pre></p> Status Description <code>pending</code> Task queued <code>running</code> Task in progress <code>completed</code> Task finished successfully <code>failed</code> Task failed (see <code>error_message</code>)"},{"location":"API/#usage","title":"Usage","text":""},{"location":"API/#get-apiv1usagesummary","title":"<code>GET /api/v1/usage/summary</code>","text":"<p>Get usage summary for an organization.</p> Parameter Type Description <code>organization_id</code> UUID Organization ID (query, required) <code>days</code> int Lookback period, 1-365 (query, default: 30) <p>Response (200 OK) <pre><code>{\n  \"organization_id\": \"org-uuid\",\n  \"period_start\": \"2023-12-15T00:00:00Z\",\n  \"period_end\": \"2024-01-15T00:00:00Z\",\n  \"total_requests\": 1250,\n  \"total_input_tokens\": 5000000,\n  \"total_output_tokens\": 250000,\n  \"total_cost_usd\": \"123.45\",\n  \"by_model\": {\n    \"claude-3-5-sonnet-20241022\": {\"requests\": 1000, \"cost_usd\": \"100.00\"},\n    \"gpt-4-turbo\": {\"requests\": 250, \"cost_usd\": \"23.45\"}\n  }\n}\n</code></pre></p>"},{"location":"API/#get-apiv1usageby-model","title":"<code>GET /api/v1/usage/by-model</code>","text":"<p>Get usage breakdown by LLM model.</p> Parameter Type Description <code>organization_id</code> UUID Organization ID (query, required) <code>days</code> int Lookback period, 1-365 (query, default: 30) <p>Response (200 OK) <pre><code>[\n  {\n    \"model_name\": \"claude-3-5-sonnet-20241022\",\n    \"requests\": 1000,\n    \"input_tokens\": 4000000,\n    \"output_tokens\": 200000,\n    \"cost_usd\": \"100.00\"\n  },\n  {\n    \"model_name\": \"gpt-4-turbo\",\n    \"requests\": 250,\n    \"input_tokens\": 1000000,\n    \"output_tokens\": 50000,\n    \"cost_usd\": \"23.45\"\n  }\n]\n</code></pre></p>"},{"location":"API/#error-responses","title":"Error Responses","text":"<p>All endpoints return errors in this format:</p> <pre><code>{\n  \"detail\": \"Error message describing what went wrong\"\n}\n</code></pre> Code Description 400 Bad Request - Invalid input 401 Unauthorized - Missing/invalid API key 404 Not Found - Resource doesn't exist 429 Too Many Requests - Rate limit exceeded 500 Internal Server Error 501 Not Implemented - Feature not available"},{"location":"ARCHITECTURE/","title":"Heisenberg Architecture","text":""},{"location":"ARCHITECTURE/#system-overview","title":"System Overview","text":"<pre><code>flowchart TB\n    subgraph Input[\"\ud83d\udce5 Input Sources\"]\n        CLI[\"CLI Commands\"]\n        GHA[\"GitHub Action\"]\n    end\n\n    subgraph Fetchers[\"\ud83d\udd0d Data Fetchers\"]\n        GAF[\"GitHub Artifacts&lt;br/&gt;Fetcher\"]\n        GLF[\"GitHub Logs&lt;br/&gt;Fetcher\"]\n        DLF[\"Docker Logs&lt;br/&gt;Fetcher\"]\n    end\n\n    subgraph Observation[\"\ud83d\udc41\ufe0f Observation Points\"]\n        direction TB\n        subgraph TestReport[\"Test Reports\"]\n            PW[\"Playwright JSON\"]\n            JU[\"JUnit XML\"]\n        end\n        subgraph Traces[\"Playwright Traces\"]\n            CON[\"Console Logs&lt;br/&gt;(JS errors, warnings)\"]\n            NET[\"Network Requests&lt;br/&gt;(failed API calls)\"]\n            ACT[\"Action Timeline&lt;br/&gt;(clicks, navigations)\"]\n        end\n        subgraph Visual[\"Visual Evidence\"]\n            SS[\"Screenshots&lt;br/&gt;(failure state)\"]\n        end\n        subgraph Logs[\"Execution Logs\"]\n            JOB[\"Job Logs&lt;br/&gt;(CI errors)\"]\n            DOC[\"Container Logs&lt;br/&gt;(backend errors)\"]\n        end\n    end\n\n    subgraph Parsers[\"\u2699\ufe0f Parsers &amp; Transformers\"]\n        PP[\"Playwright&lt;br/&gt;Parser\"]\n        JP[\"JUnit&lt;br/&gt;Parser\"]\n        TA[\"Trace&lt;br/&gt;Analyzer\"]\n        SA[\"Screenshot&lt;br/&gt;Analyzer\"]\n        JLP[\"Job Logs&lt;br/&gt;Processor\"]\n        LC[\"Log&lt;br/&gt;Compressor\"]\n    end\n\n    subgraph Unified[\"\ud83d\udd04 Unified Model\"]\n        UM[\"UnifiedTestRun\"]\n        UF[\"UnifiedFailure[]\"]\n    end\n\n    subgraph AI[\"\ud83e\udd16 AI Analysis\"]\n        PB[\"Prompt&lt;br/&gt;Builder\"]\n        LLM[\"LLM Client&lt;br/&gt;(Claude/OpenAI/Gemini)\"]\n        DP[\"Diagnosis&lt;br/&gt;Parser\"]\n    end\n\n    subgraph Output[\"\ud83d\udce4 Output\"]\n        DIAG[\"Diagnosis\"]\n        GHC[\"GitHub PR&lt;br/&gt;Comment\"]\n        JSON[\"JSON/Text&lt;br/&gt;Output\"]\n    end\n\n    %% Input flow\n    CLI --&gt; GAF\n    CLI --&gt; DLF\n    GHA --&gt; GAF\n\n    %% Fetcher to observation\n    GAF --&gt; PW\n    GAF --&gt; JU\n    GAF --&gt; CON\n    GAF --&gt; NET\n    GAF --&gt; ACT\n    GAF --&gt; SS\n    GLF --&gt; JOB\n    DLF --&gt; DOC\n\n    %% Observation to parsers\n    PW --&gt; PP\n    JU --&gt; JP\n    CON --&gt; TA\n    NET --&gt; TA\n    ACT --&gt; TA\n    SS --&gt; SA\n    JOB --&gt; JLP\n    DOC --&gt; LC\n\n    %% Parsers to unified model\n    PP --&gt; UM\n    JP --&gt; UM\n    UM --&gt; UF\n\n    %% All context to prompt builder\n    UF --&gt; PB\n    TA --&gt; PB\n    SA --&gt; PB\n    JLP --&gt; PB\n    LC --&gt; PB\n\n    %% AI pipeline\n    PB --&gt; LLM\n    LLM --&gt; DP\n    DP --&gt; DIAG\n\n    %% Output\n    DIAG --&gt; GHC\n    DIAG --&gt; JSON\n\n    %% Styling\n    classDef input fill:#e1f5fe,stroke:#01579b\n    classDef observation fill:#fff3e0,stroke:#e65100\n    classDef parser fill:#f3e5f5,stroke:#7b1fa2\n    classDef unified fill:#e8f5e9,stroke:#2e7d32\n    classDef ai fill:#fce4ec,stroke:#c2185b\n    classDef output fill:#e0f2f1,stroke:#00695c\n\n    class CLI,GHA input\n    class PW,JU,CON,NET,ACT,SS,JOB,DOC observation\n    class PP,JP,TA,SA,JLP,LC parser\n    class UM,UF unified\n    class PB,LLM,DP ai\n    class DIAG,GHC,JSON output\n</code></pre>"},{"location":"ARCHITECTURE/#observation-points-detail","title":"Observation Points Detail","text":"<pre><code>flowchart LR\n    subgraph Frontend[\"Frontend Observations\"]\n        direction TB\n        T1[\"\ud83c\udfad Playwright Traces\"]\n        T1a[\"\u251c\u2500 Console: JS errors/warnings\"]\n        T1b[\"\u251c\u2500 Network: Failed API calls\"]\n        T1c[\"\u251c\u2500 Actions: Click/navigation timeline\"]\n        T1d[\"\u2514\u2500 DOM: Snapshots at failure\"]\n\n        T2[\"\ud83d\udcf8 Screenshots\"]\n        T2a[\"\u2514\u2500 Visual state at failure moment\"]\n    end\n\n    subgraph Backend[\"Backend Observations\"]\n        direction TB\n        T3[\"\ud83d\udccb Job Logs\"]\n        T3a[\"\u251c\u2500 CI/CD errors\"]\n        T3b[\"\u251c\u2500 Test runner output\"]\n        T3c[\"\u2514\u2500 Build failures\"]\n\n        T4[\"\ud83d\udc33 Container Logs\"]\n        T4a[\"\u251c\u2500 API server errors\"]\n        T4b[\"\u251c\u2500 Database errors\"]\n        T4c[\"\u2514\u2500 Service timeouts\"]\n    end\n\n    subgraph TestData[\"Test Data\"]\n        direction TB\n        T5[\"\ud83d\udcca Test Reports\"]\n        T5a[\"\u251c\u2500 Failed test names\"]\n        T5b[\"\u251c\u2500 Error messages\"]\n        T5c[\"\u251c\u2500 Stack traces\"]\n        T5d[\"\u2514\u2500 Test duration\"]\n    end\n\n    Frontend --&gt; AI[\"\ud83e\udd16 AI Correlation\"]\n    Backend --&gt; AI\n    TestData --&gt; AI\n    AI --&gt; D[\"\ud83d\udcdd Root Cause Diagnosis\"]\n</code></pre>"},{"location":"ARCHITECTURE/#data-flow-timeline","title":"Data Flow Timeline","text":"<pre><code>sequenceDiagram\n    participant U as User/CI\n    participant CLI as CLI\n    participant GH as GitHub API\n    participant P as Parsers\n    participant UM as Unified Model\n    participant AI as LLM\n    participant O as Output\n\n    U-&gt;&gt;CLI: heisenberg analyze/fetch-github\n\n    alt fetch-github\n        CLI-&gt;&gt;GH: Get workflow run\n        GH--&gt;&gt;CLI: Run metadata\n        CLI-&gt;&gt;GH: Download artifacts\n        GH--&gt;&gt;CLI: ZIP files\n    end\n\n    rect rgb(255, 243, 224)\n        Note over P: Observation Point Extraction\n        CLI-&gt;&gt;P: Parse test report\n        CLI-&gt;&gt;P: Extract traces (console, network, actions)\n        CLI-&gt;&gt;P: Extract screenshots\n        CLI-&gt;&gt;P: Process job logs\n        CLI-&gt;&gt;P: Compress container logs\n    end\n\n    P-&gt;&gt;UM: Transform to UnifiedTestRun\n    UM-&gt;&gt;AI: Build analysis prompt\n\n    rect rgb(252, 228, 236)\n        Note over AI: AI Analysis\n        AI-&gt;&gt;AI: Correlate all evidence\n        AI-&gt;&gt;AI: Identify root cause\n        AI-&gt;&gt;AI: Generate fix suggestion\n    end\n\n    AI--&gt;&gt;O: Structured Diagnosis\n    O--&gt;&gt;U: PR Comment / JSON / Text\n</code></pre>"},{"location":"ARCHITECTURE/#component-responsibilities","title":"Component Responsibilities","text":"Component File Responsibility CLI <code>cli/commands.py</code> Entry point, orchestration GitHub Artifacts <code>github_artifacts.py</code> Download &amp; extract artifacts Playwright Parser <code>playwright_parser.py</code> Parse JSON reports JUnit Parser <code>junit_parser.py</code> Parse XML reports Trace Analyzer <code>trace_analyzer.py</code> Extract console/network/actions Screenshot Analyzer <code>screenshot_analyzer.py</code> Vision LLM analysis Job Logs Processor <code>job_logs_processor.py</code> Filter relevant CI logs Log Compressor <code>log_compressor.py</code> Smart log filtering Unified Model <code>unified_model.py</code> Framework-agnostic representation Prompt Builder <code>prompt_builder.py</code> Construct LLM prompts LLM Client <code>llm_client.py</code> Claude/OpenAI/Gemini calls Diagnosis Parser <code>diagnosis.py</code> Parse LLM response AI Analyzer <code>ai_analyzer.py</code> Orchestrate AI analysis"},{"location":"ARCHITECTURE/#observation-points-summary","title":"Observation Points Summary","text":"Source Data Type Purpose Playwright Traces Console logs JS errors, React warnings Network requests Failed API calls, timeouts Action timeline User interaction sequence Screenshots Images Visual state at failure Job Logs Text CI/CD errors, test output Container Logs Text Backend errors, DB issues Test Reports JSON/XML Error messages, stack traces"},{"location":"DEMO_PLAYGROUND_PLAN/","title":"Heisenberg Demo Playground - Implementation Plan","text":"<p>Status: Complete (Backend Pipeline) Created: 2026-01-27 Last Updated: 2026-01-28</p>"},{"location":"DEMO_PLAYGROUND_PLAN/#executive-summary","title":"Executive Summary","text":"<p>Build an interactive web playground that demonstrates Heisenberg's AI-powered test failure diagnosis using real examples from GitHub projects - not synthetic/curated cases. The key innovation is the \"Frozen Snapshots\" architecture that downloads and hosts artifacts locally, avoiding GitHub's 90-day artifact expiration.</p>"},{"location":"DEMO_PLAYGROUND_PLAN/#problem-statement","title":"Problem Statement","text":"<ol> <li>Hardcoded demos break - GitHub artifacts expire after 90 days</li> <li>Synthetic examples lack credibility - DevOps engineers are skeptical of \"perfect\" demos</li> <li>Live discovery is risky - Rate limits, latency, unpredictable results</li> </ol>"},{"location":"DEMO_PLAYGROUND_PLAN/#solution-museum-of-failures-architecture","title":"Solution: \"Museum of Failures\" Architecture","text":"<pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                    FROZEN SNAPSHOTS PIPELINE                    \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502                                                                 \u2502\n\u2502  1. playground/discover.py        [DONE]                        \u2502\n\u2502     \u2514\u2500\u2500 Finds GitHub repos with failed Playwright runs          \u2502\n\u2502                                                                 \u2502\n\u2502  2. playground/freeze.py          [DONE]                        \u2502\n\u2502     \u2514\u2500\u2500 Downloads artifacts, saves locally                      \u2502\n\u2502     \u2514\u2500\u2500 Creates metadata.json with source info                  \u2502\n\u2502                                                                 \u2502\n\u2502  3. playground/analyze.py         [DONE]                        \u2502\n\u2502     \u2514\u2500\u2500 Runs Heisenberg on frozen data                          \u2502\n\u2502     \u2514\u2500\u2500 Saves diagnosis.json                                    \u2502\n\u2502                                                                 \u2502\n\u2502  4. playground/manifest.py        [DONE]                        \u2502\n\u2502     \u2514\u2500\u2500 Aggregates cases into manifest.json                     \u2502\n\u2502     \u2514\u2500\u2500 Calculates accuracy stats                               \u2502\n\u2502                                                                 \u2502\n\u2502  5. playground/validate.py        [DONE]                        \u2502\n\u2502     \u2514\u2500\u2500 Checks if cases are still valid                         \u2502\n\u2502     \u2514\u2500\u2500 Flags stale/outdated entries                            \u2502\n\u2502                                                                 \u2502\n\u2502  6. SvelteKit Playground          [TODO]                        \u2502\n\u2502     \u2514\u2500\u2500 Consumes manifest.json                                  \u2502\n\u2502     \u2514\u2500\u2500 Zero API calls, instant load                            \u2502\n\u2502                                                                 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"DEMO_PLAYGROUND_PLAN/#key-design-decisions","title":"Key Design Decisions","text":""},{"location":"DEMO_PLAYGROUND_PLAN/#why-real-projects-over-synthetic","title":"Why Real Projects Over Synthetic","text":"Aspect Synthetic Real GitHub Projects Trust \"This is staged\" \"I can verify on GitHub\" Credibility Low High (stars, activity) Edge cases Missing Naturally present Maintenance Must invent bugs Bugs exist organically"},{"location":"DEMO_PLAYGROUND_PLAN/#why-frozen-snapshots-over-live-discovery","title":"Why Frozen Snapshots Over Live Discovery","text":"Aspect Live Discovery Frozen Snapshots Latency 30-60+ seconds Instant (0ms) Reliability Rate limits, 404s 100% uptime Consistency Random results Curated quality Cost API calls per visit One-time download"},{"location":"DEMO_PLAYGROUND_PLAN/#transparency-builds-trust","title":"Transparency Builds Trust","text":"<p>Research shows that acknowledging limitations increases credibility. Our demo should include: - Tier 1: Clear root cause identified (showcase strength) - Tier 2: Complex multi-factor diagnosis (show depth) - Tier 3: \"Cannot determine\" cases (show honesty)</p> <p>Display accuracy metrics openly: <pre><code>Accuracy on real GitHub issues: 68% root cause found\n26% actionable instrumentation recommendations\n6% incorrect diagnosis\n</code></pre></p>"},{"location":"DEMO_PLAYGROUND_PLAN/#data-structures","title":"Data Structures","text":""},{"location":"DEMO_PLAYGROUND_PLAN/#case-directory-structure","title":"Case Directory Structure","text":"<pre><code>playground/cases/\n\u251c\u2500\u2500 manifest.json                    # Index of all cases\n\u2514\u2500\u2500 tryghost-ghost-21395156769/\n    \u251c\u2500\u2500 metadata.json                # Source info, stars, dates\n    \u251c\u2500\u2500 report.json                  # Playwright report (LOCAL COPY)\n    \u251c\u2500\u2500 trace.zip                    # Playwright traces (LOCAL COPY)\n    \u251c\u2500\u2500 logs.txt                     # Docker/CI logs (optional)\n    \u2514\u2500\u2500 diagnosis.json               # Heisenberg output (PRE-COMPUTED)\n</code></pre>"},{"location":"DEMO_PLAYGROUND_PLAN/#manifestjson-schema","title":"manifest.json Schema","text":"<pre><code>{\n  \"generated_at\": \"2026-01-27T12:00:00Z\",\n  \"scenarios\": [\n    {\n      \"id\": \"tryghost-ghost-21395156769\",\n      \"display_name\": \"E2E Timeout in Ghost CMS\",\n      \"source\": {\n        \"repo\": \"TryGhost/Ghost\",\n        \"repo_url\": \"https://github.com/TryGhost/Ghost\",\n        \"stars\": 51700,\n        \"captured_at\": \"2026-01-27\",\n        \"original_run_id\": \"21395156769\"\n      },\n      \"failure_type\": \"timeout\",\n      \"difficulty_tier\": 1,\n      \"assets\": {\n        \"report\": \"tryghost-ghost-21395156769/report.json\",\n        \"trace\": \"tryghost-ghost-21395156769/trace.zip\",\n        \"diagnosis\": \"tryghost-ghost-21395156769/diagnosis.json\"\n      },\n      \"validation\": {\n        \"heisenberg_result\": \"root_cause_found\",\n        \"confidence_score\": 0.87\n      }\n    }\n  ],\n  \"stats\": {\n    \"total_scenarios\": 5,\n    \"root_cause_found\": 3,\n    \"recommendations_only\": 1,\n    \"incorrect\": 1,\n    \"last_refresh\": \"2026-01-27\"\n  }\n}\n</code></pre>"},{"location":"DEMO_PLAYGROUND_PLAN/#metadatajson-schema-per-case","title":"metadata.json Schema (per case)","text":"<pre><code>{\n  \"repo\": \"TryGhost/Ghost\",\n  \"repo_url\": \"https://github.com/TryGhost/Ghost\",\n  \"stars\": 51700,\n  \"run_id\": 21395156769,\n  \"run_url\": \"https://github.com/TryGhost/Ghost/actions/runs/21395156769\",\n  \"captured_at\": \"2026-01-27T12:00:00Z\",\n  \"artifact_names\": [\"playwright-report\", \"e2e-coverage\"]\n}\n</code></pre>"},{"location":"DEMO_PLAYGROUND_PLAN/#implementation-status","title":"Implementation Status","text":""},{"location":"DEMO_PLAYGROUND_PLAN/#completed","title":"Completed","text":"<ul> <li>[x] <code>src/heisenberg/playground/discover.py</code> - Finds GitHub repos with Playwright artifacts</li> <li>[x] <code>src/heisenberg/playground/freeze.py</code> - Downloads and saves artifacts locally</li> <li>[x] <code>src/heisenberg/playground/analyze.py</code> - Runs AI analysis on frozen data</li> <li>[x] <code>src/heisenberg/playground/manifest.py</code> - Generates manifest.json from cases</li> <li>[x] <code>src/heisenberg/playground/validate.py</code> - Checks case freshness</li> <li>[x] <code>src/heisenberg/integrations/github_artifacts.py</code> - GitHub API client for artifacts</li> <li>[x] CLI wrapper <code>heisenberg freeze</code></li> <li>[x] CLI wrapper <code>heisenberg analyze-case</code></li> <li>[x] CLI wrapper <code>heisenberg generate-manifest</code></li> <li>[x] CLI wrapper <code>heisenberg validate-cases</code></li> <li>[x] GitHub Action <code>.github/workflows/refresh-demo-cases.yml</code></li> </ul>"},{"location":"DEMO_PLAYGROUND_PLAN/#todo","title":"TODO","text":"<ul> <li>[ ] SvelteKit playground frontend</li> </ul>"},{"location":"DEMO_PLAYGROUND_PLAN/#cli-commands","title":"CLI Commands","text":""},{"location":"DEMO_PLAYGROUND_PLAN/#implemented","title":"Implemented","text":"<pre><code># Freeze a specific case (downloads artifacts locally)\nheisenberg freeze -r TryGhost/Ghost --run-id 21395156769 --output ./playground/cases\n\n# Freeze latest failed run\nheisenberg freeze -r formkit/auto-animate --output ./playground/cases\n\n# Analyze frozen case (runs AI diagnosis, saves diagnosis.json)\nheisenberg analyze-case ./playground/cases/tryghost-ghost-21395156769 -p google\n\n# Generate manifest from all analyzed cases\nheisenberg generate-manifest ./playground/cases -o manifest.json\n\n# Validate all cases (check freshness and completeness)\nheisenberg validate-cases ./playground/cases --max-age 90 --json\n</code></pre>"},{"location":"DEMO_PLAYGROUND_PLAN/#planned","title":"Planned","text":"<pre><code># GitHub Action will automate: validate \u2192 discover \u2192 freeze \u2192 analyze \u2192 manifest\n</code></pre>"},{"location":"DEMO_PLAYGROUND_PLAN/#candidate-projects-from-discover","title":"Candidate Projects (from discover)","text":"<p>Last scan: 2026-01-27</p> Repo Stars Artifacts Notes TryGhost/Ghost 51,700 e2e-coverage Popular CMS formkit/auto-animate 13,739 playwright-report Clean artifacts evcc-io/evcc 6,078 playwright-report Active project lukevella/rallly 4,924 playwright-report Scheduling app siemens/ix 318 blob-report x4 Visual testing Scille/parsec-cloud 293 blob-report + playwright Security focus"},{"location":"DEMO_PLAYGROUND_PLAN/#frontend-architecture-sveltekit","title":"Frontend Architecture (SvelteKit)","text":"<pre><code>heisenberg-playground/\n\u251c\u2500\u2500 src/\n\u2502   \u251c\u2500\u2500 routes/\n\u2502   \u2502   \u251c\u2500\u2500 +page.svelte              # Main playground\n\u2502   \u2502   \u2514\u2500\u2500 +layout.svelte            # Shell with nav\n\u2502   \u251c\u2500\u2500 lib/\n\u2502   \u2502   \u251c\u2500\u2500 components/\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 CasePicker.svelte     # Case selection\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 Terminal.svelte       # xterm.js wrapper\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 TraceViewer.svelte    # Playwright trace embed\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 DiagnosisCard.svelte  # AI analysis display\n\u2502   \u2502   \u2502   \u2514\u2500\u2500 SourceBadge.svelte    # GitHub link + stars\n\u2502   \u2502   \u2514\u2500\u2500 stores/\n\u2502   \u2502       \u2514\u2500\u2500 case.ts               # Active case state\n\u251c\u2500\u2500 static/\n\u2502   \u251c\u2500\u2500 cases/                        # Frozen snapshots\n\u2502   \u2514\u2500\u2500 manifest.json                 # Case index\n\u2514\u2500\u2500 package.json\n</code></pre>"},{"location":"DEMO_PLAYGROUND_PLAN/#key-ui-elements","title":"Key UI Elements","text":"<ol> <li>Case Picker - List of real GitHub projects with stars, dates</li> <li>Terminal View (xterm.js) - Typewriter effect for CLI output</li> <li>Trace Viewer - Embedded Playwright trace (if available)</li> <li>Diagnosis Card - AI analysis with confidence score</li> <li>Source Badge - Link to original GitHub issue/PR</li> <li>CTA Button - \"Try on your own tests \u2192 pip install heisenberg\"</li> </ol>"},{"location":"DEMO_PLAYGROUND_PLAN/#research-insights","title":"Research Insights","text":"<p>From Perplexity deep research (2026-01-27):</p> <ol> <li>Interactive demos have 20x higher engagement than video (67% CTR vs 3.21%)</li> <li>46% of developers distrust AI tools - transparency about limitations builds trust</li> <li>Bottom-up adoption - convince individual engineers, not managers</li> <li>Real examples &gt;&gt; synthetic - developers can verify claims themselves</li> <li>Successful patterns: Sentry (error\u2192code linking), Copilot (specific tasks), Playwright (community)</li> </ol>"},{"location":"DEMO_PLAYGROUND_PLAN/#refresh-strategy","title":"Refresh Strategy","text":""},{"location":"DEMO_PLAYGROUND_PLAN/#implemented-githubworkflowsrefresh-demo-casesyml","title":"Implemented: <code>.github/workflows/refresh-demo-cases.yml</code>","text":"<p>Schedule: Every Monday at 6 AM UTC (with manual trigger option)</p> <p>Jobs:</p> <ol> <li>validate - Check existing cases for staleness/completeness</li> <li>discover - Find new GitHub projects with Playwright artifacts</li> <li>freeze-and-analyze - Download artifacts, run AI diagnosis, generate manifest</li> <li>commit - Push changes to repository</li> <li>cleanup-stale - Remove cases older than 90 days</li> </ol> <p>Required Secrets: - <code>GITHUB_TOKEN</code> - For GitHub API access (automatic) - <code>GOOGLE_API_KEY</code> - For AI analysis (Gemini)</p> <p>Manual Trigger Options: - <code>max_new_cases</code> - Limit new cases per run (default: 3) - <code>force_refresh</code> - Force refresh even if no stale cases</p>"},{"location":"DEMO_PLAYGROUND_PLAN/#success-metrics","title":"Success Metrics","text":"Metric Target Measurement Time to first \"aha\" &lt; 30 seconds User testing Case load time &lt; 100ms Performance monitoring Accuracy display Visible above fold UI review GitHub verification 1 click away UX review CLI install clicks Track conversions Analytics"},{"location":"DEMO_PLAYGROUND_PLAN/#related-files","title":"Related Files","text":"<ul> <li><code>src/heisenberg/playground/discover.py</code> - Project discovery</li> <li><code>src/heisenberg/playground/freeze.py</code> - Artifact freezer</li> <li><code>src/heisenberg/playground/analyze.py</code> - Case analyzer</li> <li><code>src/heisenberg/playground/manifest.py</code> - Manifest generator</li> <li><code>src/heisenberg/playground/validate.py</code> - Case validator</li> <li><code>src/heisenberg/integrations/github_artifacts.py</code> - GitHub API client</li> <li><code>src/heisenberg/cli/commands.py</code> - CLI command handlers</li> <li><code>tests/test_freeze_case.py</code> - Freezer tests</li> <li><code>tests/test_analyze_case.py</code> - Analyzer tests</li> <li><code>tests/test_manifest_generator.py</code> - Manifest generator tests</li> <li><code>tests/test_validate_cases.py</code> - Validator tests</li> <li><code>tests/test_cli_freeze.py</code> - CLI freeze tests</li> <li><code>.github/workflows/refresh-demo-cases.yml</code> - Automated refresh workflow</li> </ul>"},{"location":"DEMO_PLAYGROUND_PLAN/#related-obsidian-notes","title":"Related Obsidian Notes","text":"<ul> <li>[[Heisenberg - Product Concept]]</li> <li>[[Heisenberg - Pre-Launch Checklist]]</li> <li>[[Heisenberg - Open Source Promotion Plan]]</li> </ul>"},{"location":"DEMO_PLAYGROUND_PLAN/#changelog","title":"Changelog","text":""},{"location":"DEMO_PLAYGROUND_PLAN/#2026-01-28","title":"2026-01-28","text":"<ul> <li>Updated plan to reflect actual implementation</li> <li>Changed terminology from \"scenarios\" to \"cases\" throughout</li> <li>Updated file paths to match actual structure (<code>src/heisenberg/playground/</code>)</li> <li>Updated CLI command names (<code>analyze-case</code>, <code>validate-cases</code>)</li> <li>Updated workflow name (<code>refresh-demo-cases.yml</code>)</li> <li>Marked all pipeline components as DONE</li> </ul>"},{"location":"DEMO_PLAYGROUND_PLAN/#2026-01-27","title":"2026-01-27","text":"<ul> <li>Initial plan created</li> <li>All pipeline components implemented</li> <li>GitHub Action created for automated weekly refresh</li> <li>Known limitation: Blob reports require <code>--merge-blobs</code> (not yet supported in freeze)</li> </ul>"},{"location":"OBSERVATIONS/","title":"Observations &amp; Future Improvements","text":""},{"location":"OBSERVATIONS/#2026-01-25-blob-reports-support-implemented","title":"2026-01-25: Blob Reports Support \u2705 IMPLEMENTED","text":""},{"location":"OBSERVATIONS/#problem-solved","title":"Problem (SOLVED)","text":"<p>Heisenberg ~~cannot~~ can now extract Playwright reports from projects that use blob reporters (sharded test runs).</p>"},{"location":"OBSERVATIONS/#technical-details","title":"Technical Details","text":"<ul> <li>Many large projects (e.g., <code>microsoft/playwright</code>) use sharded test execution</li> <li>Playwright generates \"blob reports\" for merge-reports workflow</li> <li>GitHub Actions artifacts contain: <code>artifact.zip</code> \u2192 <code>report-*.zip</code> \u2192 <code>*.json</code></li> <li>Heisenberg's <code>extract_playwright_report()</code> only looks for JSON files at the first ZIP level</li> </ul>"},{"location":"OBSERVATIONS/#evidence","title":"Evidence","text":"<pre><code># Artifact structure from microsoft/playwright run 21336408770:\nartifact.zip\n\u2514\u2500\u2500 report-chromium---bbbdb0f.zip   # &lt;-- nested ZIP not extracted\n    \u2514\u2500\u2500 report.json                  # &lt;-- actual report\n</code></pre>"},{"location":"OBSERVATIONS/#current-code-github_artifactspy284-310","title":"Current Code (github_artifacts.py:284-310)","text":"<pre><code>def extract_playwright_report(self, zip_content: bytes) -&gt; dict | None:\n    # Only searches first-level JSON files\n    json_files = [name for name in zf.namelist() if name.endswith(\".json\")]\n</code></pre>"},{"location":"OBSERVATIONS/#implementation","title":"Implementation \u2705","text":"<p>Recursive ZIP extraction added in <code>github_artifacts.py:284-360</code>: <pre><code>def extract_playwright_report(self, zip_content: bytes, max_depth: int = 3) -&gt; dict | None:\n    # First, try to find JSON files directly (preferred)\n    # Second, try JSONL files (Playwright blob report format)\n    # If no valid JSON/JSONL found, look for nested ZIP files\n    # Recursively extract with depth limit for safety\n</code></pre></p> <p>Tests added: - 9 tests in <code>TestBlobReportExtraction</code> class (nested ZIP extraction) - 5 tests in <code>TestJsonlReportExtraction</code> class (JSONL format support)</p>"},{"location":"OBSERVATIONS/#important-discovery-raw-blob-reports","title":"Important Discovery: Raw Blob Reports \u26a0\ufe0f","text":"<p>Real Playwright blob reports (e.g., from <code>microsoft/playwright</code>) contain protocol events, not ready-to-use report data:</p> <pre><code>{\"method\": \"onBegin\", \"params\": {...}}\n{\"method\": \"onTestBegin\", \"params\": {...}}\n{\"method\": \"onStepBegin\", \"params\": {...}}\n</code></pre> <p>This format requires <code>npx playwright merge-reports</code> to produce a standard JSON report.</p> <p>The current implementation works for: - \u2705 Standard JSON reports (<code>reporter: [['json', {...}]]</code>) - \u2705 Pre-merged blob reports (output of <code>merge-reports</code>) - \u2705 JSONL files with standard report structure - \u2705 Raw blob reports via <code>--merge-blobs</code> flag (requires npx/playwright)</p>"},{"location":"OBSERVATIONS/#recommendation-for-users","title":"Recommendation for Users","text":"<p>Option 1: Use <code>--merge-blobs</code> flag (requires Node.js/Playwright locally): <pre><code>heisenberg fetch-github --repo microsoft/playwright --merge-blobs\n</code></pre></p> <p>Option 2: Projects using sharded tests can add a merge step to their CI: <pre><code>- name: Merge blob reports\n  run: npx playwright merge-reports --reporter=json ./blob-reports\n\n- name: Upload merged report\n  uses: actions/upload-artifact@v4\n  with:\n    name: playwright-report\n    path: merged-report.json\n</code></pre></p>"},{"location":"OBSERVATIONS/#affected-projects","title":"Affected Projects","text":"<ul> <li>microsoft/playwright</li> <li>Any project using <code>reporter: [['blob', { outputFile: '...' }]]</code></li> <li>Projects with sharded test execution using merge-reports</li> </ul>"},{"location":"OBSERVATIONS/#workaround","title":"Workaround","text":"<p>Users must use projects with direct JSON reporter: <pre><code>// playwright.config.ts\nreporter: [['json', { outputFile: 'test-results.json' }]]\n</code></pre></p>"},{"location":"OBSERVATIONS/#future-investigation-needed","title":"Future Investigation Needed","text":""},{"location":"OBSERVATIONS/#projects-to-test-with","title":"Projects to Test With","text":"<ul> <li>[ ] Find open-source projects using direct JSON reporter (not blob)</li> <li>[ ] Cal.com - uses Playwright but E2E workflow may be disabled</li> <li>[ ] Smaller projects with simpler CI setup</li> </ul>"},{"location":"OBSERVATIONS/#additional-improvements","title":"Additional Improvements","text":"<ul> <li>[ ] Support for Playwright HTML report parsing</li> <li>[x] Support for blob report merging (<code>--merge-blobs</code> flag)</li> <li>[x] Better error messages when artifact format is unsupported</li> </ul>"},{"location":"OBSERVATIONS/#2026-01-25-github-artifacts-availability","title":"2026-01-25: GitHub Artifacts Availability","text":""},{"location":"OBSERVATIONS/#observation","title":"Observation","text":"<p>Most popular open-source projects do NOT upload Playwright JSON reports as GitHub Actions artifacts.</p>"},{"location":"OBSERVATIONS/#what-projects-actually-upload","title":"What Projects Actually Upload","text":"Project Artifacts microsoft/playwright blob-report-*.zip (nested ZIPs) appwrite/appwrite Docker build artifacts only strapi/strapi Coverage reports only shadcn-ui/ui No test artifacts supabase/supabase No Playwright artifacts"},{"location":"OBSERVATIONS/#reasons","title":"Reasons","text":"<ol> <li>Storage costs - JSON reports can be large</li> <li>Privacy - Reports may contain sensitive test data</li> <li>Different workflows - Many use blob reports for sharding</li> <li>No need - Teams use Playwright's HTML reporter locally</li> </ol>"},{"location":"OBSERVATIONS/#implication-for-fetch-github","title":"Implication for <code>fetch-github</code>","text":"<p>The <code>fetch-github</code> command has limited real-world utility because: - Few projects upload compatible artifacts - Those that do often use blob reports (not supported)</p>"},{"location":"OBSERVATIONS/#suggested-improvements","title":"Suggested Improvements","text":"<ol> <li>Add documentation about artifact requirements</li> <li>Provide a sample GitHub workflow that uploads compatible reports</li> <li>Consider supporting HTML report parsing as alternative</li> <li>Add <code>--list-artifacts</code> flag to help users debug</li> </ol>"},{"location":"OBSERVATIONS/#recommended-testing-approach","title":"Recommended Testing Approach","text":"<p>For real 1:1 testing, users should: 1. Clone a project with Playwright tests locally 2. Run tests with <code>--reporter=json</code> 3. Analyze the local report with <code>heisenberg analyze</code></p> <p>This bypasses GitHub artifact limitations entirely.</p>"},{"location":"OBSERVATIONS/#2026-01-25-professional-validation-strategy-expert-analysis","title":"2026-01-25: Professional Validation Strategy (Expert Analysis)","text":""},{"location":"OBSERVATIONS/#core-problem","title":"Core Problem","text":"<p>Heisenberg relies on a passive \"discovery\" model - hoping to find compatible artifacts on public repos. This is fundamentally unreliable and leaves the AI analysis engine untested against real-world variance.</p>"},{"location":"OBSERVATIONS/#recommended-approach-canary-repository-model","title":"Recommended Approach: \"Canary Repository\" Model","text":"<p>Instead of searching for compatible projects, create a dedicated test repository:</p> <pre><code>Repository: kamilpajak/heisenberg-canary\nPurpose: Stable, predictable source of real Playwright failures\n</code></pre>"},{"location":"OBSERVATIONS/#implementation_1","title":"Implementation:","text":"<ol> <li>Create <code>heisenberg-canary</code> repo with diverse Playwright tests designed to fail:</li> <li>Timeout scenarios (slow API, missing elements)</li> <li>Selector failures (wrong testid, DOM changes)</li> <li>Assertion failures (incorrect values, missing content)</li> <li>Network failures (API errors, connection refused)</li> <li> <p>Flaky patterns (race conditions, timing issues)</p> </li> <li> <p>GitHub Actions workflow (runs daily or on-demand):    <pre><code>- name: Run Playwright tests\n  run: npx playwright test --reporter=json\n  continue-on-error: true\n\n- name: Upload JSON report\n  uses: actions/upload-artifact@v4\n  with:\n    name: playwright-report  # Compatible with Heisenberg!\n    path: test-results.json\n</code></pre></p> </li> <li> <p>E2E test in Heisenberg CI:    <pre><code>@pytest.mark.e2e\nasync def test_fetch_from_canary_repo():\n    \"\"\"Validate fetch-github against live canary repository.\"\"\"\n    report = await client.fetch_latest_report(\"kamilpajak\", \"heisenberg-canary\")\n    assert report is not None\n    assert \"suites\" in report\n</code></pre></p> </li> </ol>"},{"location":"OBSERVATIONS/#benefits","title":"Benefits","text":"<ul> <li>Predictable: Always has compatible artifacts</li> <li>Diverse: Covers all failure types systematically</li> <li>Live: Real GitHub API, real artifacts, real chaos</li> <li>Demo-ready: Perfect for documentation and demos</li> <li>Fixture source: Fresh, authentic test data for unit tests</li> </ul>"},{"location":"OBSERVATIONS/#additional-recommendations","title":"Additional Recommendations","text":""},{"location":"OBSERVATIONS/#quick-wins-low-effort-high-impact","title":"Quick Wins (Low Effort, High Impact)","text":"<ol> <li>~~Implement blob report support~~ \u2705 DONE - recursive ZIP extraction + JSONL</li> <li>~~Add <code>--list-artifacts</code> flag~~ \u2705 DONE - helps debug artifact issues</li> <li>~~Improve error messages~~ \u2705 DONE - all errors now suggest <code>heisenberg analyze</code> as alternative</li> </ol>"},{"location":"OBSERVATIONS/#medium-term","title":"Medium-Term","text":"<ol> <li>~~E2E test suite~~ \u2705 DONE - 8 tests in <code>test_integration_github.py</code> (<code>pytest -m e2e --run-e2e</code>)</li> <li>Re-position README - promote local <code>analyze</code> as primary, <code>fetch-github</code> as convenience</li> <li>HTML report parsing - many teams only upload HTML reports</li> </ol>"},{"location":"OBSERVATIONS/#long-term","title":"Long-Term","text":"<ul> <li>GitHub App - automatic analysis on workflow completion, zero-config for users</li> </ul>"},{"location":"api/overview/","title":"API Overview","text":"<p>Heisenberg provides a REST API for integrating with other tools.</p>"},{"location":"api/overview/#starting-the-server","title":"Starting the Server","text":"<pre><code>uvicorn heisenberg.backend.app:app --reload\n</code></pre>"},{"location":"api/overview/#endpoints","title":"Endpoints","text":""},{"location":"api/overview/#post-analyze","title":"<code>POST /analyze</code>","text":"<p>Submit a test report for analysis.</p> <p>Request:</p> <pre><code>{\n  \"report\": \"...\",\n  \"format\": \"playwright\"\n}\n</code></pre> <p>Response:</p> <pre><code>{\n  \"failures\": [...],\n  \"analysis\": {\n    \"root_cause\": \"...\",\n    \"suggestion\": \"...\"\n  }\n}\n</code></pre>"},{"location":"api/overview/#authentication","title":"Authentication","text":"<p>The API uses JWT tokens for authentication. See Configuration for setup details.</p>"},{"location":"development/architecture/","title":"Architecture","text":""},{"location":"development/architecture/#project-structure","title":"Project Structure","text":"<pre><code>src/heisenberg/\n\u251c\u2500\u2500 analysis/       # AI analysis components\n\u251c\u2500\u2500 backend/        # FastAPI REST API\n\u251c\u2500\u2500 cli/            # Command-line interface\n\u251c\u2500\u2500 core/           # Core models and types\n\u251c\u2500\u2500 integrations/   # External integrations (GitHub, Docker)\n\u251c\u2500\u2500 llm/            # LLM provider abstraction\n\u251c\u2500\u2500 parsers/        # Test report parsers\n\u251c\u2500\u2500 playground/     # Discovery and validation tools\n\u2514\u2500\u2500 utils/          # Shared utilities\n</code></pre>"},{"location":"development/architecture/#key-components","title":"Key Components","text":""},{"location":"development/architecture/#parsers","title":"Parsers","text":"<p>Parse test reports from various formats:</p> <ul> <li><code>PlaywrightParser</code>: Playwright JSON/HTML reports</li> <li><code>JUnitParser</code>: JUnit XML reports</li> </ul>"},{"location":"development/architecture/#llm-router","title":"LLM Router","text":"<p>Abstracts LLM provider selection and routing:</p> <ul> <li>Supports Anthropic, OpenAI, and Google</li> <li>Automatic fallback between providers</li> <li>Rate limiting and retry logic</li> </ul>"},{"location":"development/architecture/#analysis-pipeline","title":"Analysis Pipeline","text":"<ol> <li>Parse test report</li> <li>Extract failure context</li> <li>Collect supplementary data (logs, screenshots)</li> <li>Send to LLM for analysis</li> <li>Format and return results</li> </ol>"},{"location":"development/contributing/","title":"Contributing","text":""},{"location":"development/contributing/#development-setup","title":"Development Setup","text":"<ol> <li>Clone the repository:</li> </ol> <pre><code>git clone https://github.com/kamilpajak/Heisenberg.git\ncd Heisenberg\n</code></pre> <ol> <li>Install dependencies:</li> </ol> <pre><code>uv sync --all-extras --all-groups\n</code></pre> <ol> <li>Install pre-commit hooks:</li> </ol> <pre><code>pre-commit install\n</code></pre>"},{"location":"development/contributing/#running-tests","title":"Running Tests","text":"<pre><code>uv run pytest\n</code></pre>"},{"location":"development/contributing/#code-quality","title":"Code Quality","text":"<p>The project uses several tools:</p> <ul> <li>ruff: Linting and formatting</li> <li>ty: Type checking</li> <li>tach: Architecture enforcement</li> </ul> <p>Run all checks:</p> <pre><code>uv run ruff check src/ tests/\nuv run ty check\nuv run tach check\n</code></pre>"},{"location":"getting-started/installation/","title":"Installation","text":""},{"location":"getting-started/installation/#requirements","title":"Requirements","text":"<ul> <li>Python 3.11 or higher</li> <li>An Anthropic API key (for AI analysis)</li> </ul>"},{"location":"getting-started/installation/#install-via-pip","title":"Install via pip","text":"<pre><code>pip install heisenberg\n</code></pre>"},{"location":"getting-started/installation/#install-from-source","title":"Install from source","text":"<pre><code>git clone https://github.com/kamilpajak/Heisenberg.git\ncd Heisenberg\npip install -e .\n</code></pre>"},{"location":"getting-started/installation/#environment-variables","title":"Environment Variables","text":"<p>Set your API key:</p> <pre><code>export ANTHROPIC_API_KEY=\"your-api-key\"\n</code></pre>"},{"location":"getting-started/quickstart/","title":"Quick Start","text":""},{"location":"getting-started/quickstart/#analyze-a-test-report","title":"Analyze a Test Report","text":"<pre><code>heisenberg analyze path/to/report.json\n</code></pre>"},{"location":"getting-started/quickstart/#freeze-a-github-actions-run","title":"Freeze a GitHub Actions Run","text":"<p>Download artifacts from a failed GitHub Actions run:</p> <pre><code>heisenberg freeze --repo owner/repo --run-id 12345\n</code></pre>"},{"location":"getting-started/quickstart/#example-output","title":"Example Output","text":"<pre><code>=== Root Cause Analysis ===\n\nTest: should display user profile\nFile: tests/profile.spec.ts:42\n\nRoot Cause: Race condition in data loading\nThe test clicks the profile button before the user data is fully loaded.\n\nSuggested Fix:\nAdd a wait for the API response before clicking:\n  await page.waitForResponse('**/api/user');\n</code></pre>"},{"location":"guide/cli/","title":"CLI Reference","text":""},{"location":"guide/cli/#commands","title":"Commands","text":""},{"location":"guide/cli/#heisenberg-analyze","title":"<code>heisenberg analyze</code>","text":"<p>Analyze test failures from a report file.</p> <pre><code>heisenberg analyze &lt;path&gt; [options]\n</code></pre> <p>Arguments:</p> <ul> <li><code>path</code>: Path to the test report file</li> </ul> <p>Options:</p> <ul> <li><code>--format</code>: Report format (<code>playwright</code>, <code>junit</code>)</li> <li><code>--output</code>: Output format (<code>text</code>, <code>json</code>)</li> </ul>"},{"location":"guide/cli/#heisenberg-freeze","title":"<code>heisenberg freeze</code>","text":"<p>Freeze a GitHub Actions run by downloading its artifacts.</p> <pre><code>heisenberg freeze [options]\n</code></pre> <p>Options:</p> <ul> <li><code>--repo</code>, <code>-r</code>: Repository in <code>owner/repo</code> format</li> <li><code>--run-id</code>: Workflow run ID</li> <li><code>--output-dir</code>, <code>-o</code>: Output directory for artifacts</li> <li><code>--token</code>: GitHub token (or set <code>GITHUB_TOKEN</code>)</li> </ul>"},{"location":"guide/configuration/","title":"Configuration","text":""},{"location":"guide/configuration/#environment-variables","title":"Environment Variables","text":"Variable Description Required <code>GOOGLE_API_KEY</code> Google AI API key for AI analysis Yes <code>GITHUB_TOKEN</code> GitHub token for fetching artifacts For GitHub integration <code>ANTHROPIC_API_KEY</code> Anthropic API key (alternative provider) No <code>OPENAI_API_KEY</code> OpenAI API key (alternative provider) No"},{"location":"guide/configuration/#llm-providers","title":"LLM Providers","text":"<p>Heisenberg supports multiple LLM providers:</p> <ul> <li>Google Gemini (default)</li> <li>Anthropic Claude</li> <li>OpenAI GPT</li> </ul> <p>Set the provider via environment variable:</p> <pre><code>export LLM_PROVIDER=\"google\"  # or \"anthropic\", \"openai\"\n</code></pre>"}]}